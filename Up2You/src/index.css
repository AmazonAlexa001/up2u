/* ─────────────────────────────────────────────────────────────────────────────
   File: src/index.css
   (Simple comfy, lo-fi styles. No Tailwind needed.)
   ───────────────────────────────────────────────────────────────────────────── */
/* === Theme tokens === */
:root {
  --bg: #faf8f5;
  --card: #ffffff;
  --ink: #1f1b16;          /* main text */
  --muted: #6b655c;        /* secondary text */
  --border: #e7e2db;
  --ink-contrast: #ffffff; /* text on dark buttons */
  --accent: #1f1b16;       /* primary button bg (dark ink) */
  --link: #0b57d0;         /* accessible blue */
  --focus: #6aa3ff;        /* focus outline */
  --radius-lg: 20px;
  --radius-xl: 28px;
}

/* Dark theme (high contrast) */
:root[data-theme="dark"] {
  --bg: #0e0e10;
  --card: #16161a;
  --ink: #f5f6f8;
  --muted: #b9bfc7;
  --border: #2a2a33;
  --ink-contrast: #0e0e10;
  --accent: #f5f6f8;       /* invert so primary button stays high-contrast */
  --link: #9ec2ff;
  --focus: #b2ccff;
}

/* === Base === */
* { box-sizing: border-box; }
html, body, #root { height: 100%; }
body {
  margin: 0;
  font-family: Nunito, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Apple Color Emoji", "Segoe UI Emoji";
  color: var(--ink);
  background: var(--bg);
  -webkit-font-smoothing: antialiased;
}

a { color: var(--link); text-decoration: none; }
a:hover { text-decoration: underline; }

/* Accessible focus ring */
:focus-visible {
  outline: 3px solid var(--focus);
  outline-offset: 2px;
  border-radius: 6px;
}

/* === Background visuals (auto switch with [data-theme]) === */
.bg-day, .bg-night, .bg-grain { position: fixed; inset: 0; pointer-events: none; }
.bg-day {
  background:
    radial-gradient(1200px 700px at 15% 10%, #ffecc7 0%, transparent 60%),
    linear-gradient(180deg, #fdf7ef 0%, #f7efe6 30%, #f3ede6 100%);
  opacity: 1; transition: opacity .35s ease;
}
.bg-night {
  background:
    radial-gradient(1000px 600px at 80% -10%, #2a2a6a 0%, transparent 60%),
    linear-gradient(180deg, #0b0b22 0%, #0b0b1a 30%, #0e0e10 100%);
  opacity: 0; transition: opacity .35s ease;
}
:root[data-theme="dark"] .bg-day { opacity: 0; }
:root[data-theme="dark"] .bg-night { opacity: 1; }

/* ── Starry night: denser stars + staggered twinkle + slow drift ── */
.bg-night { position: fixed; inset: 0; }

/* Layer 1 — many stars, medium brightness */
.bg-night::before {
  content: "";
  position: absolute; inset: 0;
  pointer-events: none;
  background-image:
    radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,.8) 40%, transparent 45%),
    radial-gradient(2px 2px at 70% 15%, rgba(255,255,255,.7) 40%, transparent 45%),
    radial-gradient(1.5px 1.5px at 55% 65%, rgba(255,255,255,.6) 40%, transparent 45%),
    radial-gradient(2px 2px at 85% 55%, rgba(255,255,255,.8) 40%, transparent 45%),
    radial-gradient(1.5px 1.5px at 35% 80%, rgba(255,255,255,.55) 40%, transparent 45%),
    radial-gradient(1px 1px at 15% 10%, rgba(255,255,255,.6) 40%, transparent 45%),
    radial-gradient(1px 1px at 40% 20%, rgba(255,255,255,.5) 40%, transparent 45%),
    radial-gradient(2px 2px at 60% 40%, rgba(255,255,255,.58) 40%, transparent 45%),
    radial-gradient(2px 2px at 78% 72%, rgba(255,255,255,.6) 40%, transparent 45%),
    radial-gradient(1px 1px at 90% 25%, rgba(255,255,255,.55) 40%, transparent 45%),
    radial-gradient(2px 2px at 10% 90%, rgba(255,255,255,.7) 40%, transparent 45%),
    radial-gradient(2px 2px at 95% 10%, rgba(255,255,255,.75) 40%, transparent 45%),
    radial-gradient(2px 2px at 45% 50%, rgba(255,255,255,.72) 40%, transparent 45%),
    radial-gradient(1.5px 1.5px at 80% 40%, rgba(255,255,255,.6) 40%, transparent 45%),
    /* New stars below */
    radial-gradient(1px 1px at 12% 22%, rgba(255,255,255,.55) 40%, transparent 45%),
    radial-gradient(1px 1px at 50% 15%, rgba(255,255,255,.5) 40%, transparent 45%),
    radial-gradient(2px 2px at 28% 60%, rgba(255,255,255,.65) 40%, transparent 45%),
    radial-gradient(1.5px 1.5px at 66% 85%, rgba(255,255,255,.55) 40%, transparent 45%);
  background-repeat: no-repeat;
  animation:
    twinkle-strong 5.5s infinite alternate ease-in-out,
    sky-drift-x 120s linear infinite;
  opacity: .95;           /* brighter so you notice it */
}

/* Layer 2 — fewer stars, different cadence (stagger) */
.bg-night::after {
  content: "";
  position: absolute; inset: 0;
  pointer-events: none;
  background-image:
    radial-gradient(2px 2px at 25% 45%, rgba(255,255,255,.75) 40%, transparent 45%),
    radial-gradient(2px 2px at 75% 30%, rgba(255,255,255,.6) 40%, transparent 45%),
    radial-gradient(2px 2px at 50% 75%, rgba(255,255,255,.7) 40%, transparent 45%),
    radial-gradient(1.5px 1.5px at 88% 60%, rgba(255,255,255,.7) 40%, transparent 45%),
    radial-gradient(1.5px 1.5px at 30% 90%, rgba(255,255,255,.6) 40%, transparent 45%),
    radial-gradient(2px 2px at 12% 55%, rgba(255,255,255,.65) 40%, transparent 45%),
    radial-gradient(2px 2px at 62% 22%, rgba(255,255,255,.7) 40%, transparent 45%);
  background-repeat: no-repeat;
  animation:
    twinkle-soft 7s 1.5s infinite alternate ease-in-out, /* delayed start */
    sky-drift-y 160s linear infinite;
  opacity: .85;
}

/* Twinkle = noticeable now (opacity + slight brightness) */
@keyframes twinkle-strong {
  0%   { opacity: .55; filter: brightness(0.9); transform: translate3d(0,0,0); }
  50%  { opacity: 1;   filter: brightness(1.2); }
  100% { opacity: .55; filter: brightness(0.9); }
}
@keyframes twinkle-soft {
  0%   { opacity: .5;  filter: brightness(0.9); transform: translate3d(0,0,0); }
  50%  { opacity: .95; filter: brightness(1.15); }
  100% { opacity: .5;  filter: brightness(0.9); }
}

/* Slow parallax drift so the sky feels alive */
@keyframes sky-drift-x {
  0%   { transform: translateX(0%); }
  50%  { transform: translateX(-1.5%); }
  100% { transform: translateX(0%); }
}
@keyframes sky-drift-y {
  0%   { transform: translateY(0%); }
  50%  { transform: translateY(-1%); }
  100% { transform: translateY(0%); }
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .bg-night::before,
  .bg-night::after { animation: none; }
}

/* subtle grain on top */
.bg-grain {
  opacity:.06; mix-blend-mode:multiply;
  background-image:
    radial-gradient(circle at 10% 20%, #000 1px, transparent 1px),
    radial-gradient(circle at 90% 80%, #000 1px, transparent 1px);
  background-size: 3px 3px, 3px 3px;
}

/* === Layout & components === */
.container { max-width: 720px; margin: 0 auto; padding: 40px 16px 28px; position: relative; }
.header { display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:16px; }
.brand { font-size: 24px; font-weight: 800; letter-spacing: .2px; }
.brand .pill { background: var(--accent); color:var(--ink-contrast); padding:3px 8px; border-radius: 10px; }

.themeToggle {
  border:1px solid var(--border); background:transparent; color:var(--ink);
  border-radius: 10px; padding:6px 10px; font-size:12px; cursor:pointer;
}

/* Card */
.card {
  position: relative; background: var(--card);
  border:1px solid var(--border); border-radius: var(--radius-xl);
  padding: 22px; box-shadow: 0 1px 2px rgba(0,0,0,.03);
}

.small { font-size: 12px; color: var(--muted); }
.h1 { font-size: 28px; font-weight: 800; margin: 6px 0 6px; }
.center { text-align:center; }
.stack { display:flex; flex-direction:column; gap: 16px; }
.row { display:flex; gap: 10px; flex-wrap: wrap; }
.right { display:flex; justify-content:flex-end; }

/* === Buttons === */
.btn {
  appearance:none; border:none; cursor:pointer; font: inherit;
  padding: 12px 18px; border-radius: 16px;
  background: var(--accent); color: var(--ink-contrast);
  transition: transform .06s ease, filter .15s ease; will-change: transform;
}
.btn:hover { transform: scale(1.02); }
.btn:active { transform: scale(.98); }

.btn.alt {
  background: transparent; color: var(--ink);
  border: 1px solid var(--border);
}
.btn.ghost {
  background: transparent; color: var(--ink);
  border: 1px solid var(--border); border-radius: 14px; padding: 10px 14px;
}
.btn[disabled] { opacity:.55; cursor:not-allowed; transform:none; }

/* Grid for mode options */
.grid2 { display:grid; grid-template-columns: 1fr; gap: 10px; }
@media (min-width: 600px) { .grid2 { grid-template-columns: 1fr 1fr; } }

/* Mode options (In-person / Online) — ensure readable in dark mode */
.option {
  appearance: none; /* prevent native button styles */
  background: var(--card);
  color: var(--ink);
  border:1px solid var(--border);
  border-radius: 16px;
  padding: 16px;
  text-align:left;
}
.option * { color: inherit; } /* force inner text to match theme ink */
.option.active {
  outline:2px solid var(--accent);
  outline-offset: 0;
}

/* Mood chips */
.chips { display:flex; gap:8px; flex-wrap:wrap; }
.chip {
  appearance:none;
  background: transparent;
  color: var(--ink);
  border:1px solid var(--border);
  border-radius: 999px;
  padding: 8px 12px;
  font-size: 14px;
}
.chip.active { outline:2px solid var(--accent); }

/* Display/result boxes */
.display {
  border:1px solid var(--border); border-radius:16px;
  background: color-mix(in oklab, var(--card) 85%, var(--bg));
  padding: 22px; text-align:center; font-weight:700;
  min-height: 56px; display:flex; align-items:center; justify-content:center;
}
.resultBox {
  border:1px solid var(--border); border-radius: 18px;
  background: color-mix(in oklab, var(--card) 90%, var(--bg));
  padding: 24px;
}

/* Footer (includes credit line) */
.footer {
  text-align:center;
  color: var(--muted);
  font-size: 12px;
  margin-top: 12px;
  padding: 8px 0 2px;
}
.footer a { color: var(--link); }

/* Progress dots */
.dots { display:flex; align-items:center; gap:6px; }
.dot { width:10px; height:10px; border-radius:50%; background:#d9d3cc; }
:root[data-theme="dark"] .dot { background:#3a362f; }
.dot.active { background:#17130e; }
:root[data-theme="dark"] .dot.active { background:#f5f6f8; }

/* Confetti & reel */
.confetti { position:absolute; inset:0; pointer-events:none; overflow:hidden; }

.reels { display:flex; gap:8px; justify-content:center; }
.reel {
  width: 220px; max-width: 90vw; height: 64px; border:1px solid var(--border);
  border-radius: 14px; overflow: hidden;
  background: color-mix(in oklab, var(--card) 85%, var(--bg));
}
.strip { display:flex; flex-direction:column; }
.cell { height: 64px; display:flex; align-items:center; justify-content:center; padding:0 8px; font-weight:800; }

.quip {
  display: inline-block;
  text-align: center;
  font-style: italic;
}

.quip-author {
  font-size: 0.85em;
  font-style: normal;
  margin-left: 0.5rem;
  color: var(--text-secondary);
  white-space: nowrap; /* Keeps the signature on one line */
}
